# Распределение баланса

## Обзор

Распределение баланса - это функция автоматического разделения доступных денежных средств между фондами в соответствии с их приоритетами, размерами, остатками и настройками.

## История пользователя

Как пользователь, я хочу нажатием одной кнопки распределить доступные средства между фондами в соответствии с приоритетами, их размерами и настройками.

### Пользовательский сценарий

1. Пользователь открывает список фондов на главном экране;
2. Пользователь нажимает на меню действий фондов;
3. Пользователь нажимает кнопку "Distribute";
4. Система автоматически распределяет доступные средства между фондами по следующему алгоритму - для каждого фонда по очереди в порядке их приоритетности:
   - если фонд "жадный" и его баланс отрицательный, то фонд пополняется из кошелька на на размер этого фонда + недостаток, таким образом, чтобы баланс фонда стал равен размеру этого фонда;
   - если фонд не накопительный и баланс фонда положительный, то из кошелька на фонд зачисляется столько, сколько не хватает в фонде;
   - в остальных случаях из кошелька просто перечисляется количество денег равное размеру фонда;
   - если в кошельке недостаточно денег для зачисления в фонд, то зачисляется столько, сколько осталось денег в кошельке, и оставшиеся фонды дальше игнорируются.

## Дополнительные требования

- Распределение должно быть атомарным - в случае ошибки все изменения должны быть отменены
