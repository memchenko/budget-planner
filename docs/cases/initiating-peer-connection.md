# Инициация подключения к пиру

## Обзор

Это функция установления соединения с другим пользователем для совместного управления бюджетом. После установления соединения пользователи могут обмениваться финансовыми данными и управлять общими фондами.

## История пользователя

Как пользователь, я хочу подключаться к другим пользователям, чтобы совместно управлять бюджетом и обмениваться финансовыми данными.

### Пользовательский сценарий

1. Пользователь открывает экран "Пиры";
2. Пользователь нажимает на кнопку "Подключиться к пиру";
3. Пользователь нажимает на кнопку "Инициировать";
4. Пользователь видит полосу прогресса и ждет, пока сгенерируется код подключения;
5. Пользователь видит QR-код и кнопку для копирования кода;
6. Пользователь показывает QR-код другому пользователю или отправляет ему текстовый код;
7. Пользователь нажимает кнопку "Продолжить";
8. Открывается сканер QR-кода вместе с кнопкой выбора фотографии из галереи и полем для ввода;
9. Пользователь:

- либо сканирует QR-код другого пользователя;
- либо выбирает фотографию с QR-кодом другого пользователя из галереи;
- либо вставляет текстовый код подключения другого пользователя в поле для ввода;

9. Форма подключения закрывается;
10. Если:

- "Пиры" впервые подключаются друг к другу:
  1. Пользователь в списке "Пиров" видит скелетон для нового пользователя;
  2. Пользователь видит запрос на подтверждение данных другого пользователя;
  3. Пользователь просматривает информацию о другом пользователе;
  4. Пользователь принимает или отклоняет подключение:
  - Если пользователь принимает подключение, то скелетон сменяется на аватар с именем;
  - Если пользователь отклоняет подключение, то скелетон пропадает.
- "Пиры" уже подключались друг к другу раньше:
  1. Пользователь в списке "Пиров" рядом с именем другого пользователя видит активный индикатор подключения к "Пиру";
  2. Пользователь в списке "Пиров" рядом с именем другого пользователя видит активный индикатор "синхронизации", если есть несинхронизированные изменения.

### Связанные сценарии

- [Подключиться в ответ](./accepting-peer-connection.md)
